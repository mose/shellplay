#!/usr/bin/env ruby

require 'paint'
require 'open3'

continue = true
sleeptime = 1.0/24.0
sleeptime = 0
prompt = "\033[36mrecord >\033[0m "

while continue do
  print prompt
  command = STDIN.gets
  if command == "q\n"
    puts "\nRecord ended.\n"
    continue = false
  else
    Open3.popen3("bash","-l","-c",command.strip) do |i, o, e, t|
      o.read.split("\n").each do |line|
        puts line
        sleep sleeptime
      end
      e.read.split("\n").each do |line|
        puts Paint[line, :red]
      end
    end
  end
end
